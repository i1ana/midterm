(function(g,k,m){g.execute(function(){g.when("ready").register("logger",function(){return{count:function(d,b){k.ue&&ue.count("CustomerReviews:"+d,b)},error:function(d,b){k.ueLogError&&ueLogError({message:b},{logLevel:"ERROR",attribution:d})},fatal:function(d,b){k.ueLogError&&ueLogError({message:b},{logLevel:"FATAL",attribution:d})},incrementCount:function(d){if(k.ue){var d="CustomerReviews:"+d,b=ue.count(d)||0;ue.count(d,b+1)}},warn:function(d,b){k.ueLogError&&ueLogError({message:b},{logLevel:"WARN",
attribution:d})}}});g.when("A","logger").register("ajax-model",function(d,b){function c(e,i,l,g,o,s,j){s=s?s:h++;o=o?o:i.error;g=g?g:0;l=l?l:3;j||(j="reviewsAjax"+a++,k.ue&&uet("tc",j));i.params.scope=j;i.contentType="application/x-www-form-urlencoded;charset=UTF-8";var p=i.success;i.success=function(a){delete f[s];p(a)};i.error=function(a){g++;g<l?(b.error(i.attribution,"AJAX Post to "+e+" failed, Attempt: "+g+" out of "+l),c(e,i,l,g,o,s,j)):(b.fatal(i.attribution,"AJAX Post to "+e+" from "+k.location.href+
" failed, exhausted "+l+" attempts"),o&&o(a))};f[s]=d.post(e,i);return s}var a=0,h=1,f={};return{abort:function(a){f[a]&&f[a].abort()},post:c}});g.when("A","ready").register("global-model",function(d){var d=d.state("reviews-page-state"),b=null;if(d)b=d.customerId;return{generateUrl:function(b,a){var h=b;h&&h.charAt(h.length-1)!=="/"&&(h+="/");h&&a&&(h=h+"ref="+a);return h},isSignedIn:function(){return b?!0:!1}}});g.when("A","ready").register("global-view",function(d){function b(b){var a="";if(b){var h=
b.closest("*[data-reftag]");h&&(a=h.attr("data-reftag"))}!a&&b&&(b=b.closest("*[rel]"))&&(a=b.attr("rel"));if(!a&&event&&event.data&&event.data.reftag)a=event.data.reftag;return a}return{getReftagByDom:b,getReftag:function(c){var a;if(c&&c.$target)a=c.$target;c&&c.id&&(a=d.$("#"+c.id));if(c&&c.expander&&c.expander.$expander)a=c.expander.$expander;return b(a)}}});g.when("A","logger").register("global-utils",function(d,b){return{convertToInteger:function(c,a){return c===parseInt(c,10)?c:c!==null&&c!==
m&&c!==""?parseInt(c.replace(/[^0-9]/g,""),10):a?a:(b.error("convertToInteger","Cannot convert "+c+" to Integer"),0)},isBlank:function(b){return b===null||b===m?!0:d.trim(b).length===0},startsWith:function(b,a){if(b===a)return!0;else if(b===null||a===null)return!1;return b.indexOf(a)===0}}});g.when("A").execute(function(d){d.declarative("cr-popup",["click"],function(b){var c=b.data,a=c.toolbar;typeof a==="undefined"&&(a=0);var h=c.url;typeof h==="undefined"&&(h=b.$target.closest("a").attr("href"));
b=b.$event;k.open(h,c.title,"width="+c.width+",height="+c.height+",resizable=1,scrollbars=1,toolbar="+a+",status=1").focus();b.preventDefault()})});g.when("A","global-utils","3p-urijs").register("uri-utils",function(d,b,c){return{getCurrentUri:function(){return c(k.location.href)},isAmazonDomain:function(a){if(typeof a==="string"||a instanceof String)a=c(a);var h=b.startsWith(a.domain(),"amazon");h===!1&&(a=a.hostname(),a=a.substring(a.indexOf(".")+1),h=b.startsWith(a,"amazon"));return h},setQueryParameters:function(a,
h){if(typeof a==="string"||a instanceof String)a=c(a);d.each(h,function(c,e){b.isBlank(c)?a.removeSearch(e):a=a.setSearch(e,c)});return a},setReftag:function(a,h){if(typeof a==="string"||a instanceof String)a=c(a);for(var f=a.segment(),e=!1,d=f.length-1;d>=0;d--)if(b.startsWith(f[d],"ref=")){e=!0;f[d]="ref="+h;break}e||f.push("ref="+h);a.segment(f);return a}}});g.declare("reviews-constants",{events:{CONTENT_CHANGED:"reviews:content-changed",RELOAD:"reviews:content-reload",RELOAD_COMPLETE:"reviews:content-reload-complete",
AUTOSCROLL_COMPLETE:"reviews:autoscroll-complete",FILTER:"reviews:filter-action",FILTER_NO_HISTORY:"reviews:filter-no-history-action",PAGINATION:"reviews:page-action",SEARCH_TEXTBOX:"reviews:search-textbox",SEARCH_BUTTON:"reviews:search-button",VOTE:"reviews:vote-action",INPUT_COMMENT:"reviews:input-comment",SUBMIT_COMMENT:"reviews:submit-comment",SORT_COMMENTS:"reviews:sort-comments",MORE_COMMENTS:"reviews:more-comments",EDIT_COMMENT:"reviews:edit-comment",DELETE_COMMENT:"reviews:delete-comment",
SUBMIT_EDIT_COMMENT:"reviews:submit-edit-comment",MODIFY_EDIT_COMMENT:"reviews:modify-edit-comment"},filterOptions:{LEGACY_HELPFUL:"byRankDescending",LEGACY_RECENT:"bySubmissionDateDescending",MOBILE_HELPFUL:"sh",MOBILE_RECENT:"sd",HELPFUL:"helpful",RECENT:"recent",ALL_STARS:"all_stars",ONE_STAR:"one_star",TWO_STAR:"two_star",THREE_STAR:"three_star",FOUR_STAR:"four_star",FIVE_STAR:"five_star",ALL_FORMATS:"all_formats",ALL_REVIEWS:"all_reviews"},keycodes:{ENTER:13,BACK_SPACE:8,SPACE:32},aui:{HIDDEN:"aok-hidden",
NOWRAP:"aok-nowrap"}});g.when("A","reviews-content-view","reviews-content-model","reviews-filter-view","reviews-pagination-view","logger","uri-utils","reviews-constants","a-expander","a-carousel-framework").register("reviews-content-controller",function(d,b,c,a,h,f,e,i,l,g){function o(b){a.setReviewerTypeOption(b);return c.setReviewerType(b)}function k(b){a.setFormatTypeOption(b);return c.setFormatType(b)}function j(b){a.setFilterKeyword(b);return c.setFilterByKeyword(b)}function p(){return c.getSortOrder()}
function u(b){a.setSortOrderOption(b);return c.setSortOrder(b)}function m(){return c.getStarFilter()}function v(b){a.setStarOption(b);return c.setStarFilter(b)}function t(a){h.hasPaging()&&h.updateSelectedPage(a);return c.setPageNumber(a)}function r(){return c.getPageNumber()}function w(){return{sortBy:p(),reviewerType:c.getReviewerType(),formatType:c.getFormatType(),filterByStar:m(),pageNumber:r(),filterByKeyword:c.getFilterByKeyword()}}function y(a){var b=!1;a&&d.each({sortBy:u,reviewerType:o,formatType:k,
filterByStar:v,pageNumber:t,filterByKeyword:j},function(n,c){c in a&&(b=n(a[c])||b)});return b}function n(){b.setLoading(!1);z();b.setLoadInProgress(!0)}function A(){b.setLoading(!1);b.setLoadInProgress(!1);z();d.trigger(i.events.RELOAD_COMPLETE)}function B(){b.setLoadInProgress(!1);b.showError(!0);c.setError(!0);b.clearContent();b.setLoading(!1);d.trigger(i.events.RELOAD_COMPLETE)}function z(){l.initializeExpanders();d.each(d.$(".reviews-initialize-ajax-carousel"),function(a){g.getCarousel(a)})}
return{setSortOrder:u,setStarFilter:v,setPageNumber:t,getSortOrder:p,getStarFilter:m,getPageNumber:r,getCurrentParameters:w,updateLinks:function(){var a=e.getCurrentUri(),b=d.$("*[data-reviews-param]");d.each(b,function(b){var b=d.$(b),n=d.parseJSON(b.attr("data-reviews-param")),c=b.attr("data-reftag"),n=e.setQueryParameters(a,n),n=e.setReftag(n,c);b.is("a")&&b.attr("href",n);b.find("a").attr("href",n)})},reloadReviews:function(a,e){var h=y(e),j=c.getError();if(h||j){j=w();if(e)j.shouldAppend=e.shouldAppend,
j.deviceType=e.deviceType;d.trigger(i.events.RELOAD);f.incrementCount("reviewsReload");b.setLoadInProgress(!1);b.showError(!1);c.setError(!1);b.setLoading(!0);j.reftag=a;c.getReviews(j,n,A,B);b.scroll()}return h}}});g.when("A","reviews-constants","ready").register("reviews-content-view",function(d,b){var c,a,h,f,e,i;function l(a){var b={};b.winTop=d.$(k).scrollTop();b.browserHeight=Math.max(document.documentElement.clientHeight,k.innerHeight||0);if(a)b.start=a.offset().top,b.end=b.start+a.height();
return b}function g(){var a=l().browserHeight<p,b;if(b=a)b=l(e),b=b.end>b.winTop-j;if(b)return e;else{if(a=!a)a=l(i),a=a.start>a.winTop+j;if(a)return i;else if(a=l(e),a.end<a.winTop-s)return e}return null}var o=b.aui.HIDDEN,s=20,j=100,p=550;c=d.$(".reviews");i=d.$("#reviews-summary");h=d.$(".reviews-loading");a=d.$(".reviews-load-progess");f=d.$(".review-filter-error");e=d.$("#reviews-filter-bar");return{clearContent:function(){c.html("")},setLoadInProgress:function(b){a.toggleClass(o,!b)},setLoading:function(a){h.toggleClass(o,
!a)},showError:function(a){f.toggleClass(o,!a)},scroll:function(){var a=g();a?(clearInterval(null),a=l(a),d.$("html,body").stop(),d.$("html,body").animate({scrollTop:a.start},{queue:!1,duration:200,complete:function(){d.trigger(b.events.AUTOSCROLL_COMPLETE)}})):d.trigger(b.events.AUTOSCROLL_COMPLETE)}}});g.when("A","global-model","ajax-model","reviews-constants","uri-utils","3p-urijs","global-utils","ready").register("reviews-content-model",function(d,b,c,a,h,f,e){function i(a){return function(){r=
!1;if(typeof a==="function")return a.apply(this,arguments)}}var a=f.parseQuery(h.getCurrentUri().query()),l=a.sortBy||a.s||"",g=a.filterByStar||a.filterBy||"",o=e.convertToInteger(a.pageNumber,1),k=a.reviewerType||"",j=a.formatType||"",p=a.filterByKeyword||"",m=!1,d=d.state("reviews-page-state"),x,v,t;if(d)x="/ss/customer-reviews/ajax/reviews/get/",v=d.asin,t=d.deviceType;var r=!1;return{getReviewerType:function(){return k},setReviewerType:function(a){var b=k!==a;k=a;return b},getError:function(){return m},
setError:function(a){var b=m!==a;m=a;return b},getFormatType:function(){return j},setFormatType:function(a){var b=j!==a;j=a;return b},getFilterByKeyword:function(){return p},setFilterByKeyword:function(a){var b=p!==a;p=a;return b},getSortOrder:function(){return l},setSortOrder:function(a){var b=l!==a;l=a;return b},getStarFilter:function(){return g},setStarFilter:function(a){var b=g!==a;g=a;return b},setPageNumber:function(a){var a=e.convertToInteger(a,1),b=a!==o;o=a;return b},getPageNumber:function(){return o||
1},getReviews:function(a,e,n,A){r&&c.abort(r);var h=b.generateUrl(x,a.reftag);a.deviceType=t;a.pageSize=10;a.asin=v;a.filterByKeyword=a.filterByKeyword||"";r=c.post(h,{params:a,attribution:"getReviews",success:i(n),error:i(A),chunk:function(a){a[0]==="loaded"&&e()}})}}});g.when("A","reviews-filter-view","reviews-pagination-view","global-view","reviews-content-controller","reviews-history-controller","reviews-constants").register("reviews-filter-controller",function(d,b,c,a,h,f,e){function i(a,b,c){var a=
h.reloadReviews(b,a,c),e=!1;c&&a?e=f.push(b):a&&(e=f.replace(b));e&&h.updateLinks()}function l(a,b){var c;if(a&&a.$target)c=a.$target;a&&a.nativeItemNode&&(c=d.$(a.nativeItemNode));q(c,b)}function q(b,c){var e=a.getReftagByDom(b),h=b.closest("*[data-reviews-param]"),h=d.parseJSON(h.attr("data-reviews-param"));i(h,e,c)}function o(b){var e=b.$target,b=a.getReftag(b),f=1;if(e.is("a")&&(c.isPrevButton(e)?(f=h.getPageNumber()-1,b=b+"_prev_"+f):c.isNextButton(e)?(f=h.getPageNumber()+1,b=b+"_next_"+f):(f=
c.extractPageNumber(e),b=b+"_"+f),f!==null&&!isNaN(f)))f=Math.max(f,1),e=[],e.pageNumber=f,i(e,b,!0)}function k(c){var c=a.getReftag(c),e=[];e.filterByKeyword=b.getFilterKeyword();e.pageNumber=1;i(e,c,!0)}f.historySupported()&&(d.declarative(e.events.FILTER,"click",function(a){l(a,!0);a.$event.preventDefault()}),d.declarative(e.events.PAGINATION,"click",function(a){o(a);a.$event.preventDefault()}));d.declarative(e.events.FILTER_NO_HISTORY,"click",function(a){l(a,!1);a.$event.preventDefault()});d.declarative(e.events.SEARCH_TEXTBOX,
"keypress",function(a){a.$event.which===e.keycodes.ENTER&&k(a)});d.declarative(e.events.SEARCH_BUTTON,"click",function(a){k(a)});d.on("a:dropdown:sort-order-dropdown:select",function(a){l(a,!0)});d.on("a:dropdown:reviewer-type-dropdown:select",function(a){l(a,!0)});d.on("a:dropdown:format-type-dropdown:select",function(a){l(a,!0)});d.on("a:dropdown:star-count-dropdown:select",function(a){l(a,!0)});g.when("mash").execute(function(){d.on.scroll(function(){var a=d.$(".cm-cr-show-more");d.onScreen(a)&&
(q(a.find("a"),!1),a.remove())})});d.on(e.events.RELOAD_COMPLETE,c.loadPaginationDom);return{filterClick:l,pagingClick:o,keywordSearch:k}});g.when("A","a-dropdown","reviews-constants","ready").register("reviews-filter-view",function(d,b,c){var a,h,f,e,i;function l(a,c){var e=b.getSelect(a),h=!1;e&&(h=e.val(),e.getOptions().update({selected:"false"}),e.setValue(c),h=h!==c);return h}var g=c.filterOptions;a=d.$("#sort-order-dropdown");e=d.$("#reviewer-type-dropdown");h=d.$("#star-count-dropdown");f=
d.$("#format-type-dropdown");i=d.$("#filterByKeywordTextBox");return{getFilterKeyword:function(){return i.val()},setFilterKeyword:function(a){a||(a="");return d.equals(i.val(),a)?!1:i.val(a)},setFormatTypeOption:function(a){if(!a)a=g.ALL_FORMATS;return l(f,a)},setReviewerTypeOption:function(a){if(!a)a=g.ALL_REVIEWS;return l(e,a)},setSortOrderOption:function(b){if(b)if(b===g.LEGACY_HELPFUL)b=g.HELPFUL;else{if(b===g.LEGACY_RECENT)b=g.RECENT}else b=g.HELPFUL;return l(a,b)},setStarOption:function(a){if(a)if(a===
"addOneStar")a=g.ONE_STAR;else if(a==="addTwoStar")a=g.TWO_STAR;else if(a==="addThreeStar")a=g.THREE_STAR;else if(a==="addFourStar")a=g.FOUR_STAR;else{if(a==="addFiveStar")a=g.FIVE_STAR}else a=g.ALL_STARS;return l(h,a)}}});g.when("A","global-utils","ready").register("reviews-pagination-view",function(d,b){var c,a,h,f;function e(){c=d.$("ul.a-pagination");a=c.find("li.page-button");h=c.find("li:first");f=c.find("li:last");c.find(".lower-page-dots");c.find(".upper-page-dots")}function i(){return c.length!==
0}c=void 0;a=void 0;h=void 0;f=void 0;e();return{extractPageNumber:function(a){var c,e;a.is("a")?(c=a.parent(),e=a):a.is("li")&&(c=a,e=a.children("a"));return c.hasClass("page-button")?b.convertToInteger(e.html()):null},hasPaging:i,isNextButton:function(a){var b=a;b.is("a")&&(b=a.parent());return b[0]===f[0]},isPrevButton:function(a){var b=a;b.is("a")&&(b=a.parent());return b[0]===h[0]},loadPaginationDom:e,updateSelectedPage:function(e){if(!i())return!1;if(e===null||e===m)e=1;e=b.convertToInteger(e);
e<1&&(e=1);var h;a:{if(i()&&(h=c.find("li.a-selected").find("a").html(),!b.isBlank(h))){h=b.convertToInteger(h);break a}h=null}for(var f=a,g=0;g<f.length;g++){var j=d.$(f[g]);b.convertToInteger(j.find("a").html())===e?j.addClass("a-selected"):j.removeClass("a-selected")}return h!==e}}});g.when("A","reviews-content-controller","uri-utils","3p-urijs").register("reviews-history-controller",function(d,b,c,a){function h(){var a=c.getCurrentUri(),b=d.state("reviews-page-state"),a=c.isAmazonDomain(a);return b&&
d.capabilities.history&&a}function f(a,e,f){var i;i=c.getCurrentUri();f&&(i=c.setReftag(i,f));f=b.getCurrentParameters();f.pageNumber=String(f.pageNumber);i=c.setQueryParameters(i,f);f=c.getCurrentUri();f=d.equals(i.query(),f.query());if(h())return a(i),k.navbar&&k.navbar.update&&k.navbar.update(),!f;else e(i)}function e(){var e=a.parseQuery(c.getCurrentUri().query());e.filterByStar=e.filterByStar||e.filterBy;delete e.filterBy;e.sortBy=e.sortBy||e.s;delete e.s;e.sortBy=e.sortBy||"";e.reviewerType=
e.reviewerType||"";e.formatType=e.formatType||"";e.pageNumber=e.pageNumber||"";e.filterByStar=e.filterByStar||"";e.filterByKeyword=e.filterByKeyword||"";b.reloadReviews(i,e)&&b.updateLinks();k.navbar&&k.navbar.update&&k.navbar.update()}var i="cm_cr_pr_brwser";if(h())k.onpopstate=e,history.replaceState(null,null,k.location.href);return{push:function(a){return f(function(a){history.pushState(null,null,a)},function(a){k.location.href=a},a)},replace:function(a){return f(function(a){history.replaceState(null,
null,a)},function(){},a)},historySupported:h}});g.when("A","review-comment-list-controller","reviews-constants").register("review-comment-parent-controlller",function(d,b,c){function a(a){this._childControllers={};this._A=a;var b=this,e=c.events;a.on("a:expander:review_comment_expander:toggle:expand",function(a){b._getChildController(a).expandComments(a)});a.declarative(e.MORE_COMMENTS,"click",function(a){b._getChildController(a).showMore(a)});a.declarative(e.SORT_COMMENTS,"click",function(a){b._getChildController(a).sortComments(a)});
a.declarative(e.INPUT_COMMENT,"keyup",function(a){b._getChildController(a).commentAreaKeyUp(a)});a.declarative(e.INPUT_COMMENT,"click",function(a){b._getChildController(a).commentAreaClick(a)});a.declarative(e.SUBMIT_COMMENT,"click",function(a){b._getChildController(a).submitButtonClick(a)});a.declarative(e.EDIT_COMMENT,"click",function(a){b._getChildController(a).editLinkClick(a)});a.declarative(e.SUBMIT_EDIT_COMMENT,"click",function(a){b._getChildController(a).submitEditButtonClick(a)});a.declarative(e.DELETE_COMMENT,
"click",function(a){b._getChildController(a).deleteButtonClick(a)});a.declarative(e.MODIFY_EDIT_COMMENT,"keyup",function(a){b._getChildController(a).editCommentAreaKeyUp(a)});a.on(e.RELOAD,function(){b._childControllers={}});a.on.load(function(){var c=a.$(".a-icon-collapse");if(c&&(c=c.closest("[data-a-expander-name=review_comment_expander]")))if(c=b._getChildControllerFromDom(c))c.expandComments(),c.scrollToComments()})}a.prototype._getChildController=function(a){return this._getChildControllerFromDom(a.expander?
a.expander.$expander:a.$target.closest(".a-expander-container"))};a.prototype._getChildControllerFromDom=function(a){var c=a.closest(".review").attr("id");return c?(this._childControllers[c]||(this._childControllers[c]=new b(this._A,a)),this._childControllers[c]):null};return a});g.when("A","review-comment-list-view","review-comment-list-model","review-comment-controller","global-view","global-model").register("review-comment-list-controller",function(d,b,c,a,h){function f(a,h){this._expanderDom=
h;this._view=new b(a,h);this._model=new c(a);this._childControllers={}}f.prototype._getChildController=function(b){var b=b.$target.closest(".review-comment"),c=b.attr("id");this._childControllers[c]||(this._childControllers[c]=new a(d,b));return this._childControllers[c]};f.prototype.sortComments=function(a){if(!a.$target.hasClass("a-selected")&&!this._view.isLoading())this._view.toggleSortOrder(),this._cachedComments?this.toggleLastCommentView():(this._cachedComments=this._view.getCurrentComments(),
this._view.clearComments(),this.updateCommentCount(),this.loadNext(h.getReftag(a)));a.$event.preventDefault()};f.prototype.commentAreaKeyUp=function(){this._view.hasPurchase()&&(d.trim(this._view.getTextAreaValue()).length>0?this._view.hideNoTextError():this._view.showNoTextError())};f.prototype.commentAreaClick=function(a){var b=this._view;b.isSubmitCommentButtonShown()||(b.showSubmitCommentButton(),this._model.isApprovedAuthor(h.getReftag(a),function(a){a==="false"&&b.showNoPurchaseError()},function(){}))};
f.prototype.editCommentAreaKeyUp=function(a){this._getChildController(a).editCommentAreaKeyUp(a)};f.prototype.editLinkClick=function(a){this._getChildController(a).editLinkClick()};f.prototype.submitEditButtonClick=function(a){this._getChildController(a).submitEditButtonClick(a)};f.prototype.deleteButtonClick=function(a){this._getChildController(a).deleteButtonClick(a)};f.prototype.submitButtonClick=function(a){var b=this._view;if(b.hasPurchase())if(b.getTextAreaValue().length>0){if(!b.isSubmitting()){b.setSubmitting(!0);
b.hideCommentSubmitError();var c=this;b.getSortOrder()==="oldest"&&(b.toggleSortOrder(),this.toggleLastCommentView());var a=h.getReftag(a),f=b.getCsrfT();this._model.submitComment(b.getReviewId(),b.getTextAreaValue(),f,a,function(a){b.setSubmitting(!1);a&&a!=="false"?(b.showReviewCommentHeader(),b.prependComments(a),b.setTotalCount(b.getTotalCount()+1),b.clearTextArea(),b.hideSubmitCommentButton(),c.updateCommentCount()):b.showCommentSubmitError()},function(){b.setSubmitting(!1);b.showCommentSubmitError()})}}else b.showNoTextError()};
f.prototype.scrollToComments=function(){this._view.scrollToComments()};f.prototype.expandComments=function(a){this._view.getCurrentCount()===0&&this.loadNext(h.getReftag(a))};f.prototype.showMore=function(a){this.loadNext(h.getReftag(a));a.$event.preventDefault()};f.prototype.toggleLastCommentView=function(){var a=this._view.getCurrentComments();this._view.setCurrentComments(this._cachedComments);this._cachedComments=a;this.updateCurrentCommentCount()};f.prototype.loadNext=function(a){var b=this._view;
if(b.getTotalCount()>0&&!b.isLoading()){b.setLoading(!0);var b=this._view,c=this;b.hideCommentLoadError();this._model.getComments(this._view.getThreadId(),this._view.getSortOrder(),this._view.getCurrentCount(),a,function(a){b.setLoading(!1);b.showReviewCommentHeader();b.showLastDivider();b.appendComments(a);b.hideLastDivider();c.updateCommentCount()},function(){b.setLoading(!1);b.showCommentLoadError();b.hideLastDivider()})}};f.prototype.updateCurrentCommentCount=function(){var a=this._view.getShownCommentCount();
this._view.setCurrentCount(a);a===this._view.getTotalCount()||a===0?this._view.hideShowMoreButton():this._view.showShowMoreButton()};f.prototype.updateCommentCount=function(){var a=this._view.getShownCommentCount();(a>this._view.getTotalCount()||a===this._view.getCurrentCount())&&this._view.setTotalCount(a);this.updateCurrentCommentCount()};return f});g.when("A","global-utils","reviews-constants").register("review-comment-list-view",function(d,b,c){function a(a,b){this._expanderDom=b;this._A=a;this._csrfTDom=
b.find("[name=csrfT]");this._signinDom=b.find("[name=signInUrl]");this._commentTextAreaDom=b.find(".comment-text-area").find("textarea");this._commentHeader=b.find(".review-comments-header");this._currentCountDom=b.find(".review-comment-count");this._totalCountDom=b.find(".review-comment-total");this._moreCommentsButtonDom=b.find(".more-comments-button");this._commentsSectionDom=b.find(".review-comments");this._sortNewestDom=b.find(".sort-newest");this._sortOldestDom=b.find(".sort-oldest");this._submitCommentButtonDom=
b.find(".submit-comment-button");this._loadingDom=b.find(".comment-loading");this._noTextErrorDom=b.find(".comment-no-text-error");this._noPurchaseErrorDom=b.find(".comment-prs-error");this._commentSubmitErrorDom=b.find(".comment-submit-error");this._commentLoadErrorDom=b.find(".comment-load-error");this._commentSubmissionDom=b.find(".comment-submission")}a.prototype.hideLastDivider=function(){this._expanderDom.find(".comment-divider:last").addClass(c.aui.HIDDEN)};a.prototype.showLastDivider=function(){this._expanderDom.find(".comment-divider:last").removeClass(c.aui.HIDDEN)};
a.prototype.hideShowMoreButton=function(){this._moreCommentsButtonDom.addClass(c.aui.HIDDEN)};a.prototype.showShowMoreButton=function(){this._moreCommentsButtonDom.removeClass(c.aui.HIDDEN)};a.prototype.prependComments=function(a){a=this._A.$(a).hide();this._commentsSectionDom.prepend(a);a.slideDown()};a.prototype.appendComments=function(a){a=this._A.$(a).hide();this._commentsSectionDom.append(a);a.slideDown()};a.prototype.getCurrentComments=function(){return this._commentsSectionDom.html()};a.prototype.setCurrentComments=
function(a){this._commentsSectionDom.html(a)};a.prototype.clearComments=function(){this._commentsSectionDom.html("")};a.prototype.getThreadId=function(){return this._commentsSectionDom.attr("id")};a.prototype.getReviewId=function(){return this._expanderDom.closest(".review").attr("id")};a.prototype.getShownCommentCount=function(){return this._commentsSectionDom.find(".review-comment").length};a.prototype.getCurrentCount=function(){return b.convertToInteger(this._currentCountDom.html())};a.prototype.setCurrentCount=
function(a){this._currentCountDom.html(a)};a.prototype.getTotalCount=function(){return b.convertToInteger(this._totalCountDom.html())};a.prototype.setTotalCount=function(a){this._totalCountDom.html(a)};a.prototype.isLoading=function(){return!this._loadingDom.hasClass(c.aui.HIDDEN)};a.prototype.setLoading=function(a){a?(this._loadingDom.removeClass(c.aui.HIDDEN),this._moreCommentsButtonDom.addClass(c.aui.HIDDEN)):this._loadingDom.addClass(c.aui.HIDDEN)};a.prototype.isSubmitting=function(){return this._submitCommentButtonDom.hasClass("submitting")};
a.prototype.setSubmitting=function(a){a?this._submitCommentButtonDom.addClass("submitting"):this._submitCommentButtonDom.removeClass("submitting")};a.prototype.getSortOrder=function(){if(this._sortNewestDom.hasClass("a-selected"))return"newest";else if(this._sortOldestDom.hasClass("a-selected"))return"oldest"};a.prototype.toggleSortOrder=function(){this._sortNewestDom.toggleClass("a-selected");this._sortNewestDom.toggleClass("a-color-state");this._sortNewestDom.children(":first").toggleClass("a-selected");
this._sortNewestDom.children(":first").toggleClass("a-color-state");this._sortOldestDom.toggleClass("a-selected");this._sortOldestDom.toggleClass("a-color-state");this._sortOldestDom.children(":first").toggleClass("a-selected");this._sortOldestDom.children(":first").toggleClass("a-color-state")};a.prototype.showCommentLoadError=function(){this._commentLoadErrorDom.removeClass(c.aui.HIDDEN)};a.prototype.hideCommentLoadError=function(){this._commentLoadErrorDom.addClass(c.aui.HIDDEN)};a.prototype.getTextAreaValue=
function(){return this._commentTextAreaDom.val()};a.prototype.clearTextArea=function(){this._commentTextAreaDom.val("")};a.prototype.showNoTextError=function(){this._noTextErrorDom.removeClass(c.aui.HIDDEN);this._commentTextAreaDom.addClass("a-form-error")};a.prototype.hideNoTextError=function(){this._noTextErrorDom.addClass(c.aui.HIDDEN);this._commentTextAreaDom.removeClass("a-form-error")};a.prototype.showCommentSubmitError=function(){this._commentSubmitErrorDom.removeClass(c.aui.HIDDEN);this._commentTextAreaDom.addClass("a-form-error")};
a.prototype.hideCommentSubmitError=function(){this._commentSubmitErrorDom.addClass(c.aui.HIDDEN);this._commentTextAreaDom.removeClass("a-form-error")};a.prototype.showNoPurchaseError=function(){this._noPurchaseErrorDom.removeClass(c.aui.HIDDEN);this._commentTextAreaDom.addClass("a-form-error")};a.prototype.hasPurchase=function(){return this._noPurchaseErrorDom.hasClass(c.aui.HIDDEN)};a.prototype.hideSubmitCommentButton=function(){this._submitCommentButtonDom.addClass(c.aui.HIDDEN)};a.prototype.showSubmitCommentButton=
function(){this._submitCommentButtonDom.removeClass(c.aui.HIDDEN)};a.prototype.isSubmitCommentButtonShown=function(){return!this._submitCommentButtonDom.hasClass(c.aui.HIDDEN)};a.prototype.getCsrfT=function(){return this._csrfTDom.val()};a.prototype.showReviewCommentHeader=function(){this._commentHeader.removeClass(c.aui.HIDDEN)};a.prototype.hideReviewCommentHeader=function(){this._commentHeader.addClass(c.aui.HIDDEN)};a.prototype.scrollToComments=function(){d.$("html,body").stop();d.$("html,body").animate({scrollTop:this._commentSubmissionDom.offset().top-
50},{queue:!1,duration:500})};return a});g.when("A","global-model","ajax-model").register("review-comment-list-model",function(d,b,c){function a(a){this._A=a;a=a.state("reviews-page-state");this._reviewCommentsAjaxUrl=a.reviewCommentsAjaxUrl;this._reviewCommentSubmissionAjaxUrl=a.reviewCommentSubmissionAjaxUrl;this._approvedAuthorAjaxUrl=a.approvedAuthorAjaxUrl}a.prototype.isApprovedAuthor=function(a,f,e){var i=d.state("reviews-cache-approvedAuthor");i===null?(a=b.generateUrl(this._approvedAuthorAjaxUrl,
a),c.post(a,{params:{},success:function(a){d.state("reviews-cache-approvedAuthor",a);f(a)},error:e})):f(i)};a.prototype.getComments=function(a,d,e,i,g,k){a={threadId:a,sortCommentsBy:d,offset:e,count:5};i=b.generateUrl(this._reviewCommentsAjaxUrl,i);c.post(i,{params:a,success:g,error:k},1)};a.prototype.submitComment=function(a,d,e,i,g,k){a={reviewId:a,commentText:d,csrfT:e};i=b.generateUrl(this._reviewCommentSubmissionAjaxUrl,i);c.post(i,{params:a,success:g,error:k},1)};return a});g.when("A","review-comment-view",
"review-comment-model","global-view").register("review-comment-controller",function(d,b,c,a){function h(a,e){this._commentDom=e;this._view=new b(a,e);this._model=new c(a,e)}h.prototype.editCommentAreaKeyUp=function(){this._view.getCommentTextAreaValue().length>0?this._view.hideNoTextError():this._view.showNoTextError()};h.prototype.editLinkClick=function(){this._view.showEditSection();this._view.hideEditLink()};h.prototype.submitEditButtonClick=function(b){b.$event.preventDefault();var c=this._view;
if(!c.isSubmitting())if(c.hideSubmitError(),c.getCommentTextAreaValue().length===0)c.showNoTextError();else if(c.getCommentTextAreaValue()!==c.getDisplayedCommentText()){c.setSubmitting(!0);var b=a.getReftag(b),d=this._view.getCsrfT();this._model.submitEditedComment(c.getCommentId(),c.getCommentTextAreaValue(),d,b,function(a){a&&a!==!1&&a!=="false"?c.replace(a):c.showSubmitError();c.setSubmitting(!1)},function(){c.showSubmitError();c.setSubmitting(!1)})}else c.showCommentText(),c.showEditLink(),c.setSubmitting(!1)};
h.prototype.deleteButtonClick=function(b){b.$event.preventDefault();var c=this._view,b=a.getReftag(b),d=this._view.getCsrfT();c.isSubmitting()||(c.hideSubmitError(),c.setSubmitting(!0),this._model.deleteComment(c.getCommentId(),d,b,function(a){a&&a!==!1&&a!=="false"?c.replace(a):c.showSubmitError();c.setSubmitting(!1)},function(){c.showSubmitError();c.setSubmitting(!1)}))};return h});g.when("A","reviews-constants").register("review-comment-view",function(d,b){function c(a,b){this._A=a;this._populateDoms(b)}
c.prototype._populateDoms=function(a){this._commentDom=a;this._submitButtonDom=a.find(".submit-comment-button");this._deleteButtonDom=a.find(".delete-comment-button");this._commentTextDom=a.find(".review-comment-text");this._editSectionDom=a.find(".edit-comment-section");this._editLinkDom=a.find(".edit-comment-link");this._commentId=a.attr("id");this._textAreaDom=a.find("textarea");this._noTextErrorDom=a.find(".edit-comment-no-text-error");this._submitErrorDom=a.find(".edit-comment-submit-error");
this._csrfTDom=a.find("[name=csrfT]")};c.prototype.getCommentId=function(){return this._commentId};c.prototype.showEditSection=function(){this._commentTextDom.addClass(b.aui.HIDDEN);this._editSectionDom.removeClass(b.aui.HIDDEN)};c.prototype.showCommentText=function(){this._commentTextDom.removeClass(b.aui.HIDDEN);this._editSectionDom.addClass(b.aui.HIDDEN)};c.prototype.hideEditLink=function(){this._editLinkDom.addClass(b.aui.HIDDEN)};c.prototype.showEditLink=function(){this._editLinkDom.removeClass(b.aui.HIDDEN)};
c.prototype.getCommentTextAreaValue=function(){return this._textAreaDom.val()};c.prototype.getDisplayedCommentText=function(){this._commentTextDom.html()};c.prototype.updateDisplayedCommentText=function(a){this._commentTextDom.html(a)};c.prototype.isSubmitting=function(){return this._submitButtonDom.hasClass("submitting")};c.prototype.replace=function(a){this._commentDom.html(this._A.$(a).find(".review-comment").andSelf().html());this._populateDoms(this._commentDom)};c.prototype.setSubmitting=function(a){a?
this._submitButtonDom.addClass("submitting"):this._submitButtonDom.removeClass("submitting")};c.prototype.showNoTextError=function(){this._noTextErrorDom.removeClass(b.aui.HIDDEN);this._textAreaDom.addClass("a-form-error")};c.prototype.hideNoTextError=function(){this._noTextErrorDom.addClass(b.aui.HIDDEN);this._textAreaDom.removeClass("a-form-error")};c.prototype.showSubmitError=function(){this._submitErrorDom.removeClass(b.aui.HIDDEN);this._textAreaDom.addClass("a-form-error")};c.prototype.hideSubmitError=
function(){this._submitErrorDom.addClass(b.aui.HIDDEN);this._textAreaDom.removeClass("a-form-error")};c.prototype.getCsrfT=function(){return this._csrfTDom.val()};return c});g.when("A","global-model","ajax-model").register("review-comment-model",function(d,b,c){function a(a,b){this._A=a;this._deleteAjaxUrl=b.find(".delete-comment-button").find("a").attr("href");this._editAjaxUrl=b.find(".submit-comment-button").find("a").attr("href")}a.prototype.submitEditedComment=function(a,d,e,g,k,m){a={commentId:a,
commentText:d,csrfT:e};g=b.generateUrl(this._editAjaxUrl,g);c.post(g,{params:a,success:k,error:m})};a.prototype.deleteComment=function(a,d,e,g,k){a={commentId:a,csrfT:d};e=b.generateUrl(this._deleteAjaxUrl,e);c.post(e,{params:a,success:g,error:k})};return a});g.when("A","psr-model","psr-view","global-view","global-model").register("psr-controller",function(d,b,c,a,h){function f(a){this._model=new b(a);this._view=new c(a);var d=this;a.declarative("star-rating-action","click",function(a){d.submitStarRating(a)});
a.declarative("star-rating-clear-action","click",function(a){d.clearStarRating(a)});a.declarative("star-rating-action","mouseenter",function(a){d.initialTooltip();d.showMouseoverState(a)});a.declarative("star-rating-action","mousemove",function(a){d.showMouseoverState(a)});a.declarative("star-rating-action","mouseleave",function(){d.showSubmittedState()})}f.prototype.submitStarRating=function(b){b.$event.preventDefault();var c=this.getStarRatingAtMousePointer(b.$event),d=this._model.getCsrfToken(),
f=this._model.getSigninUrl();if(h.isSignedIn()){var g=this,m=this._view;this._model.setSubmittedStarRating(c);b=a.getReftag(b);this._model.submitStarRating(c,b,function(){g.showSubmittedState();m.hidePenName();m.showSavedDom()})}else c=f+encodeURIComponent("&rating="+c)+encodeURIComponent("&csrfT="+d),k.location=c};f.prototype.clearStarRating=function(b){b.$event.preventDefault();this._model.setSubmittedStarRating(null);var c=this;this._model.clearStarRating(a.getReftag(b),function(){c.showSubmittedState()})};
f.prototype.initialTooltip=function(){this._view.initialTooltip()};f.prototype.showMouseoverState=function(a){var a=this.getStarRatingAtMousePointer(a.$event),b=this._model.getPreviousStarRating();if(b===null||b===0)this._view.showPenName(),this._view.hideSavedDom(),this._view.showBlueStars();this._view.isTooltipReady()&&b!==a&&(b=a,this._view.showStarRatingValue(a),this._view.showRatingDescription(d.state("reviews-rating-descriptions")[a]),this._model.setPreviousStarRating(b))};f.prototype.showSubmittedState=
function(){this._model.setPreviousStarRating(null);var a=this._model.getSubmittedStarRating();this._view.showStarRatingValue(a);this._view.hideBlueStars();a===null||a===0?(this._view.hideClearRating(),this._view.showRateYourItem(),this._view.showDefaultButton()):(this._view.hideRateYourItem(),this._view.showClearRating(),this._view.showPrimaryButton())};f.prototype.getStarRatingAtMousePointer=function(a){a=a.offsetX===m?a.layerX:a.offsetX;return this._view.isBigStar()?Math.floor(a/34)+1:Math.floor(a/
19)+1};return f});g.when("A","global-model","ajax-model").register("psr-model",function(d,b,c){function a(a){this._A=a;a=a.state("review-summary-state");this._asin=a.asin;this._ownRating=a.ownRating;this._csrfToken=a.csrfToken;this._signinUrl=a.signinUrl;this._contextId="ReviewsConsumption";this._ratingSubmissionAjaxUrl=a.ratingSubmissionAjaxUrl;this._previousStarRating=null;this._submittedStarRating=this._ownRating?this._ownRating:0}a.prototype.getCsrfToken=function(){return this._csrfToken};a.prototype.getSigninUrl=
function(){return this._signinUrl};a.prototype.getPreviousStarRating=function(){return this._previousStarRating};a.prototype.setPreviousStarRating=function(a){this._previousStarRating=a};a.prototype.getSubmittedStarRating=function(){return this._submittedStarRating};a.prototype.setSubmittedStarRating=function(a){this._submittedStarRating=a};a.prototype.submitStarRating=function(a,d,e){a={asin:this._asin,rating:a,csrfT:this._csrfToken,contextIdForRatingService:this._contextId};d=b.generateUrl(this._ratingSubmissionAjaxUrl,
d);c.post(d,{params:a,attribution:"submitStarRating",success:e})};a.prototype.clearStarRating=function(a,d){var e={asin:this._asin,rating:0,csrfT:this._csrfToken,contextIdForRatingService:this._contextId},g=b.generateUrl(this._ratingSubmissionAjaxUrl,a);c.post(g,{params:e,attribution:"clearStarRating",success:d})};return a});g.when("A","reviews-constants","ready").register("psr-view",function(d,b){function c(a){this._A=a;this._clearRating=a.$(".clearStars");this._rateYourItem=a.$(".rateYourItem");
this._ratingStarsDom=a.$(".ratingStars");this._writeReviewButton=a.$(".writeReviewButton");this._shareYourThoughtsDom=a.$(".shareYourThoughts")}c.prototype.showPenName=function(){this._A.$(".rating-pen-name").removeClass(b.aui.HIDDEN)};c.prototype.hidePenName=function(){this._A.$(".rating-pen-name").addClass(b.aui.HIDDEN)};c.prototype.showSavedDom=function(){this._A.$(".rating-saved").removeClass(b.aui.HIDDEN)};c.prototype.hideSavedDom=function(){this._A.$(".rating-saved").addClass(b.aui.HIDDEN)};
c.prototype.showBlueStars=function(){this._ratingStarsDom.addClass("blue-star")};c.prototype.hideBlueStars=function(){this._ratingStarsDom.removeClass("blue-star")};c.prototype.showClearRating=function(){this._clearRating.removeClass(b.aui.HIDDEN)};c.prototype.hideClearRating=function(){this._clearRating.addClass(b.aui.HIDDEN)};c.prototype.showRateYourItem=function(){this._rateYourItem.removeClass(b.aui.HIDDEN)};c.prototype.hideRateYourItem=function(){this._rateYourItem.addClass(b.aui.HIDDEN)};c.prototype.showPrimaryButton=
function(){this._writeReviewButton.addClass("a-button-primary")};c.prototype.showDefaultButton=function(){this._writeReviewButton.removeClass("a-button-primary")};c.prototype.showShareYourThoughtsDom=function(){this._shareYourThoughtsDom.removeClass(b.aui.HIDDEN)};c.prototype.hideShareYourThoughtsDom=function(){this._shareYourThoughtsDom.addClass(b.aui.HIDDEN)};c.prototype.showRatingDescription=function(a){this._A.$(".rating-description").html(a)};c.prototype.initialTooltip=function(){this._A.$(".rating-description").parent().addClass("rating-tooltip")};
c.prototype.showStarRatingValue=function(a){a||(a=0);this.isBigStar()?(this._ratingStarsDom.removeClass("a-star-large-0"),this._ratingStarsDom.removeClass("a-star-large-1"),this._ratingStarsDom.removeClass("a-star-large-2"),this._ratingStarsDom.removeClass("a-star-large-3"),this._ratingStarsDom.removeClass("a-star-large-4"),this._ratingStarsDom.removeClass("a-star-large-5"),this._ratingStarsDom.addClass("a-star-large-"+a)):(this._ratingStarsDom.removeClass("a-star-medium-0"),this._ratingStarsDom.removeClass("a-star-medium-1"),
this._ratingStarsDom.removeClass("a-star-medium-2"),this._ratingStarsDom.removeClass("a-star-medium-3"),this._ratingStarsDom.removeClass("a-star-medium-4"),this._ratingStarsDom.removeClass("a-star-medium-5"),this._ratingStarsDom.addClass("a-star-medium-"+a))};c.prototype.isBigStar=function(){return this._ratingStarsDom.hasClass("a-icon-star-large")};c.prototype.isTooltipReady=function(){return this._A.$(".rating-description").length!==0};return c});g.when("A","vote-model","vote-view").register("vote-controller",
function(d,b,c){function a(a){c.hideButtons(a);c.showFeedback(a)}function h(d,e){a(d);b.submitVote(e.ajaxUrl,e.voteValue,e.voteInstanceId,e.csrfT,function(a){a===!0?(c.hideFeedback(d),c.showThankYouAlert(d)):(c.hideFeedback(d),c.showErrorAlert(d))},function(){c.hideFeedback(d);c.showErrorAlert(d)})}d.declarative("reviews:vote-action","click",function(a){h(a.$target,a.data);a.$event.preventDefault()});return{submitVote:h}});g.when("A","ajax-model").register("vote-model",function(d,b){return{submitVote:function(c,
a,d,f,e,g){b.post(c,{params:{voteInstanceId:d,voteValue:a,csrfT:f},attribution:"submitVote",success:e,error:g})}}});g.when("A","reviews-constants").register("vote-view",function(d,b){function c(a,b){return a.closest(".cr-vote").find(b)}return{hideThankYouAlert:function(a){c(a,".cr-vote-success").addClass(b.aui.HIDDEN)},showThankYouAlert:function(a){c(a,".cr-vote-success").removeClass(b.aui.HIDDEN)},showErrorAlert:function(a){c(a,".cr-vote-error").removeClass(b.aui.HIDDEN)},showFeedback:function(a){c(a,
".cr-vote-feedback").removeClass(b.aui.HIDDEN)},hideFeedback:function(a){c(a,".cr-vote-feedback").addClass(b.aui.HIDDEN)},hideButtons:function(a){c(a,".cr-vote-buttons").addClass(b.aui.HIDDEN)}}});g.when("A","video-controller","reviews-constants").register("video-parent-controller",function(d,b,c){function a(a){this._childControllers={};this._A=a;var b=this;this.initVideoPlayerForAllReviews();a.on(c.events.RELOAD,function(){b._childControllers={}});a.on(c.events.RELOAD_COMPLETE,function(){b.initVideoPlayerForAllReviews()})}
a.prototype.initVideoPlayerForAllReviews=function(){this._reviewDomList=this.getReviewDomList();this.generateChildController()};a.prototype.getReviewDomList=function(){return d.$(".reviews .review")};a.prototype.generateChildController=function(){if(this._reviewDomList!==m&&this._reviewDomList.length>0)for(var a=0;a<this._reviewDomList.length;a++)if(this._reviewDomList[a]!==m){var c=this._reviewDomList[a].id;c!==m&&c!==""&&(this._childControllers[c]=new b(this._A,c))}};return a});g.when("A","video-model",
"video-view").register("video-controller",function(d,b,c){function a(a,d){this._A=a;this._reviewId=d;this._videoModel=new b(this._A,this._reviewId);this._videoView=new c(this._A);this.displayVideo()}a.prototype.displayVideo=function(){var a=this._videoModel.getVideoDomId(),b=this._videoModel.getVideoUrl(),c=this._videoModel.getVideoSlateImgUrl(),d=this._videoModel.getVideoSwfUrl();a===m||a===""||b===m||b===""||d===m||d===""||this._videoView.display(a,b,c,d)};return a});g.when("A").register("video-model",
function(){function d(b,c){this._A=b;this._reviewId=c}d.prototype.getVideoDomId=function(){return"video-block-"+this._reviewId};d.prototype.getVideoUrl=function(){return this._A.$("#"+this._reviewId+" .video-url").val()};d.prototype.getVideoSlateImgUrl=function(){return this._A.$("#"+this._reviewId+" .video-slate-img-url").val()};d.prototype.getVideoSwfUrl=function(){return this._A.$("#video-swf-url").val()};return d});g.when("A","Airy","ready").register("video-view",function(d,b){function c(a){this._A=
a}c.prototype.display=function(a,c,d,e){b.embed({parentId:a,streamingUrls:[c],slateImages:{preloadSlate:d},swfUrl:e})};return c});g.when("A","ready").register("review-image-asset-loader",function(d){return{loadAssets:function(){d.ajax("/gp/customer-reviews/aj/private/reviewsGallery/get-image-gallery-assets",{method:"post",success:function(b){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",b.reviewsLightboxCSS);document.getElementsByTagName("head")[0].appendChild(c);
c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",b.reviewsLightboxJS);document.getElementsByTagName("head")[0].appendChild(c)},error:function(){var b="/gp/customer-reviews/aj/metrics/log-values";b+="?noCache="+(new Date).getTime();b+="&SimpleStack:ReviewImageAssetLoaderFailure=1";if(k.Image)(new Image).src=b}})}}});g.when("A","ready").register("review-image-binder",function(d){return{bindReview:function(b,c,a){var h=new ReviewGallery(a,"DESKTOP");h.initializeForReview(b);
var f=d.$("#"+c);f.find(".review-image-tile").each(function(b){d.$(this).bind("click",function(){f.find(".a-popover-trigger").click();g.when("reviewsLightbox-ready-"+a).execute(function(){h.render();h.showImageAtIndex(b)})})})}}})})})(function(){var g=window.AmazonUIPageJS||window.P,k=g._namespace||g.attributeErrors;return k?k("CustomerReviewsAssets"):g}(),window);